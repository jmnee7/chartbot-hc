<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°</title>
    <meta property="og:title" content="í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://jmnee7.github.io/chartbot-hc/assets/og.jpeg">
    <meta property="og:image:secure_url" content="https://jmnee7.github.io/chartbot-hc/assets/og.jpeg">
    <meta property="og:url" content="https://hcstrm.com/">
    <meta property="og:site_name" content="í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°">
    <meta name="twitter:image" content="https://jmnee7.github.io/chartbot-hc/assets/og.jpeg">
    <!-- ì¹´ì¹´ì˜¤í†¡ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ìœ„í•œ ì¶”ê°€ ë©”íƒ€íƒœê·¸ -->
    <meta name="description" content="í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë° ìŒì› ì´ê³µíŒ€">
    <meta name="keywords" content="í•´ì°¬ ìŒì› ì´ê³µíŒ€">
    <meta name="author" content="í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°">
    <!-- ì¶”ê°€ OG íƒœê·¸ -->
    <meta property="og:locale" content="ko_KR">
    <meta property="og:image:type" content="image/jpeg">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <link rel="stylesheet" href="styles/main.css?v=4.0">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EğŸ»%3C/text%3E%3C/svg%3E">
  </head>
  <body>
    <!-- Top App Bar -->
    <div class="topbar">
      <div class="topbar__title" id="homeTitle" role="button" tabindex="0" aria-label="í™ˆìœ¼ë¡œ ì´ë™"><img src="assets/home/logo/logo.png" alt="ë¡œê³ " style="height:40px; width:auto; vertical-align:middle; margin-right:10px;"> í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°</div>
      <div class="topbar__actions">
        <button class="hamburger" id="hamburgerBtn" aria-label="ë©”ë‰´ ì—´ê¸°" aria-expanded="false">
          <span class="hamburger__bars"></span>
        </button>
      </div>
    </div>

    <!-- Slide-out Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
      <div class="mobile-menu__header">
        <button class="menu-close" id="menuCloseBtn" aria-label="ë‹«ê¸°">âœ•</button>
      </div>
      <a href="#" onclick="openStreamList(); closeMenu(); return false;">ìŠ¤íŠ¸ë¦¬ë° ë¦¬ìŠ¤íŠ¸</a>
        <a href="#" onclick="openTodoPage(); closeMenu(); return false;">Daily TO-DO LIST</a>

      <!-- ê°€ì´ë“œ ìƒìœ„ ë° í•˜ìœ„ ë©”ë‰´ -->
      <a href="#" id="guideParent" onclick="toggleSubmenu('guide'); return false;">ê°€ì´ë“œ â–¾</a>
      <div class="submenu" id="guideSubmenu" style="display: none;">
        <a href="#" onclick="openGuideMenu('id'); closeMenu(); return false;">ì•„ì´ë”” ê°€ì´ë“œ</a>
        <a href="#" onclick="openGuideMenu('streaming'); closeMenu(); return false;">ìŒì› ìŠ¤íŠ¸ë¦¬ë° ê°€ì´ë“œ</a>
        <a href="#" onclick="openGuideMenu('mv'); closeMenu(); return false;">ë®¤ë¹„ ê°€ì´ë“œ</a>
        <a href="#" onclick="openGuideMenu('music'); closeMenu(); return false;">ìŒì› ë‹¤ìš´ë¡œë“œ ê°€ì´ë“œ</a>
        <a href="#" onclick="openGuideMenu('vote'); closeMenu(); return false;">íˆ¬í‘œ ê°€ì´ë“œ</a>
        <a href="#" onclick="openGuideMenu('other'); closeMenu(); return false;">ê¸°íƒ€ ê°€ì´ë“œ</a>
      </div>

      <!-- ê¸°íƒ€ ìƒìœ„ ë° í•˜ìœ„ ë©”ë‰´ -->
      <a href="#" id="etcParent" onclick="toggleSubmenu('etc'); return false;">ê¸°íƒ€ â–¾</a>
      <div class="submenu" id="etcSubmenu" style="display: none;">
        <a href="#" onclick="openQuickModal('streaming'); closeMenu(); return false;">ì›í´ë¦­ ìŠ¤íŠ¸ë¦¬ë°</a>
        <a href="#" onclick="openQuickModal('radio'); closeMenu(); return false;">ì›í´ë¦­ ë¼ë””ì˜¤ ì‹ ì²­</a>
        <a href="#" onclick="openGuideMenu('groupbuy'); closeMenu(); return false;">ê³µë™êµ¬ë§¤</a>
        <a href="#" onclick="alert('ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.ğŸ»'); closeMenu(); return false;">íˆ¬í‘œ</a>
        <a href="#" onclick="openEventPage(); closeMenu(); return false;">ì´ë²¤íŠ¸</a>
        <a href="#" onclick="alert('ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.ğŸ»'); closeMenu(); return false;">ê³µì§€ì‚¬í•­</a>
      </div>
    </div>
    <div class="backdrop" id="menuBackdrop"></div>

    <main id="dashboard-view" class="container">
      <div class="dashboard-grid">

        <!-- Home Banner Slider (auto) -->
        <div class="banner-section" id="home-banner">
          <div class="banner-slider" id="bannerSlider">
            <div class="banner-slide">
              <a href="https://into.melon.com/bridge/kakaotalk/musicwave/j_hRlIdLiwdByFCA3w6woQ?type=channel&t=1757306429748" target="_blank" rel="noopener">
                <img src="assets/home/banner/musicwave.jpeg" alt="ë®¤ì§ì›¨ì´ë¸Œ ë°°ë„ˆ">
              </a>
            </div>
            <div class="banner-slide">
              <a href="https://x.com/haechanstrm/status/1958163414007918855?s=46&t=v_6BPoVYQREP02R8RyJyuA" target="_blank" rel="noopener">
                <img src="assets/home/banner/ê³µë™êµ¬ë§¤.jpeg" alt="ê³µë™êµ¬ë§¤ ë°°ë„ˆ">
              </a>
            </div>
          </div>
          <button class="banner-nav prev" id="bannerPrev" aria-label="ì´ì „">â€¹</button>
          <button class="banner-nav next" id="bannerNext" aria-label="ë‹¤ìŒ">â€º</button>
          <div class="banner-dots" id="bannerDots"></div>
        </div>

        <!-- Shortcut buttons under banner -->
        <div class="card" id="home-shortcuts">
          <div class="home-shortcuts-grid">
            <button type="button" class="home-shortcut" onclick="openQuickModal('streaming')">ì›í´ë¦­ ìŠ¤íŠ¸ë¦¬ë°</button>
            <button type="button" class="home-shortcut" onclick="openQuickModal('radio')">ì›í´ë¦­ ë¼ë””ì˜¤ ì‹ ì²­</button>
              <button type="button" class="home-shortcut" onclick="openTodoPage()">TO-DO LIST</button>
            <button type="button" class="home-shortcut" onclick="openStreamList()">ìŠ¤íŠ¸ë¦¬ë° ë¦¬ìŠ¤íŠ¸</button>
          </div>
        </div>

        <!-- Quick Actions row currently empty (all consolidated into modals) -->

        <!-- Streaming list THIRD -->
        <section class="chart-layout" id="rank-section-container">
          <div class="card" id="rank-section">
            <h2><span class="card-icon">ğŸ†</span>ì‹¤ì‹œê°„ ìˆœìœ„ <small>(<span id="lastUpdate"></span>)</small></h2>
            <div class="rank-grid">
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/melon.png" class="service-logo">ë©œë¡  TOP100</span>
                  <span class="rank-badge" id="melon-top-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="melon-top-rank">-</span>
                  <span class="rank-change" id="melon-top-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/melon.png" class="service-logo">ë©œë¡  HOT100</span>
                  <span class="rank-badge" id="melon-hot-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="melon-hot-rank">-</span>
                  <span class="rank-change" id="melon-hot-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/bugs.ico" class="service-logo">ë²…ìŠ¤</span>
                  <span class="rank-badge" id="bugs-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="bugs-rank">-</span>
                  <span class="rank-change" id="bugs-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/genie.png" class="service-logo">ì§€ë‹ˆ</span>
                  <span class="rank-badge" id="genie-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="genie-rank">-</span>
                  <span class="rank-change" id="genie-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/vibe.ico" class="service-logo">ë°”ì´ë¸Œ</span>
                  <span class="rank-badge" id="vibe-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="vibe-rank">-</span>
                  <span class="rank-change" id="vibe-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/flo.ico" class="service-logo">í”Œë¡œ</span>
                  <span class="rank-badge" id="flo-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="flo-rank">-</span>
                  <span class="rank-change" id="flo-change"></span>
                </div>
              </div>
            </div>
          </div>
        </section>


        <div class="quick-actions-row">
          <div class="card youtube-section" style="grid-column: 1 / -1;">
            <h2 class="section-title"><span class="emoji">ğŸ“ˆ</span>ìœ íŠœë¸Œ ì¶”ì´</h2>
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/pqMCgfnBx74" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="youtube-stats-display">
              <div class="stat-item">
                <span class="stat-label">ì¡°íšŒìˆ˜</span>
                <span class="stat-value" id="viewCount">-</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">ì¢‹ì•„ìš”</span>
                <span class="stat-value" id="likeCount">-</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Move Rank section to the very bottom of dashboard grid -->
        <section class="chart-layout" style="grid-column: 1 / -1;">
          <div class="card" aria-hidden="true" style="display:none"></div>
        </section>
      </div>
    </main>

    <section id="guide-view" class="container guide-section" style="display: none;">
      <div class="card">
        <div class="guide-hub">
          <div id="streaming-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openStreamingGuide('melon')">ë©œë¡ </button>
              <button class="guide-item" onclick="openStreamingGuide('musicwave')">ë®¤ì§ì›¨ì´ë¸Œ</button>
              <button class="guide-item" onclick="openStreamingGuide('genie')">ì§€ë‹ˆ</button>
              <button class="guide-item" onclick="openStreamingGuide('bugs')">ë²…ìŠ¤</button>
              <button class="guide-item" onclick="openStreamingGuide('flo')">í”Œë¡œ</button>
              <button class="guide-item" onclick="openStreamingGuide('vibe')">ë°”ì´ë¸Œ</button>
              <button class="guide-item" onclick="openStreamingGuide('spotify')">ìŠ¤í¬í‹°íŒŒì´</button>
              <button class="guide-item" onclick="openStreamingGuide('stationhead')">ìŠ¤í…Œì´ì…˜í—¤ë“œ</button>
              <button class="guide-item" onclick="openStreamingGuide('applemusic')">ì• í”Œë®¤ì§</button>
            </div>
          </div>

          <div id="id-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openIdCategoryGrid('id', this)">ì•„ì´ë”” ìƒì„±</button>
              <button class="guide-item" onclick="openIdCategoryGrid('dualnumber', this)">ë“€ì–¼ ë„˜ë²„ ìƒì„±</button>
            </div>
            <div id="id-subgrid" class="guide-grid" style="display: none;"></div>
          </div>

          <div id="download-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openMusicDlGuide('melon')">ë©œë¡ </button>
              <button class="guide-item" onclick="openMusicDlGuide('genie')">ì§€ë‹ˆ</button>
              <button class="guide-item" onclick="openMusicDlGuide('bugs')">ë²…ìŠ¤</button>
              <button class="guide-item" onclick="openMusicDlGuide('vibe')">ë°”ì´ë¸Œ</button>
              <button class="guide-item" onclick="openMusicDlGuide('kakao')">ì¹´ì¹´ì˜¤ë®¤ì§</button>
            </div>
          </div>

          <div id="mv-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openMvCategoryGrid('streaming', this)">ìŠ¤íŠ¸ë¦¬ë°</button>
              <button class="guide-item" onclick="openMvCategoryGrid('download', this)">ë‹¤ìš´ë¡œë“œ</button>
            </div>
            <div id="mv-subgrid" class="guide-grid" style="display: none;"></div>
          </div>

          <div id="vote-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openVoteGuide('musicbank')">ë®¤ì§ë±…í¬</button>
              <button class="guide-item" onclick="openVoteGuide('musiccore')">ìŒì•…ì¤‘ì‹¬</button>
              <button class="guide-item" onclick="openVoteGuide('inkigayo')">ì¸ê¸°ê°€ìš”</button>
              <button class="guide-item" onclick="openVoteGuide('showchampion')">ì‡¼ì±”í”¼ì–¸</button>
              <button class="guide-item" onclick="openVoteGuide('theshow')">ë”ì‡¼</button>
              <button class="guide-item" onclick="openVoteGuide('mcount')">ì— ì¹´ìš´íŠ¸ë‹¤ìš´</button>
            </div>
          </div>

          <div id="other-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openOtherGuide('spotify_pre')">ìŠ¤í¬í‹°íŒŒì´ ì‚¬ì „ ì €ì¥</button>
              <button class="guide-item" onclick="openOtherGuide('radio')">ë¼ë””ì˜¤ ì‹ ì²­</button>
              <button class="guide-item" onclick="openOtherGuide('coloring')">Vì»¬ëŸ¬ë§</button>
              <button class="guide-item" onclick="openOtherGuide('simul')">ë™ì‹œìŠ¤ë°</button>
              <button class="guide-item" onclick="openOtherGuide('stability')">ìŠ¤ë° ëŠê¹€ ë°©ì§€</button>
              <button class="guide-item" onclick="openOtherGuide('shorts')">ìˆí¼ ì œì‘</button>
              <button class="guide-item" onclick="openOtherGuide('etc')">ê¸°íƒ€</button>
            </div>
          </div>
          <div id="other-subgrid" class="guide-grid" style="display: none;"></div>
          <div id="other-etc-subgrid" class="guide-grid" style="display: none; overflow: hidden; max-height: 0px; transition: max-height 0.3s ease-out;"></div>

          <div id="groupbuy-grid" style="display: none;">
            <div class="guide-grid">
              <button class="guide-item" onclick="openGroupBuyGuide('minirecord')">ë¯¸ë‹ˆë ˆì½”ë“œ</button>
              <button class="guide-item" onclick="openGroupBuyGuide('applemusic')">ì• í”Œë®¤ì§</button>
              <button class="guide-item" onclick="openGroupBuyGuide('everline')">ì—ë²„ë¼ì¸</button>
              <button class="guide-item" onclick="openGroupBuyGuide('allmd')">ì˜¬ì— ë””</button>
            </div>
          </div>
        </div>

        <div class="guide-content" style="display: none;">
          <div id="guideText" class="guide-text" style="display: none;"></div>
          <div class="guide-image-container" aria-live="polite">
            <img id="guideImage" class="guide-image" alt="ê°€ì´ë“œ ì´ë¯¸ì§€" decoding="async" loading="lazy" />
          </div>
        </div>
      </div>
    </section>

    <section id="event-view" class="container event-section" style="display: none;">
      <div class="card">
        <div class="event-hub">
          <div id="event-grid">
            <div class="guide-grid">
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('radio')">ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­<span class="event-period">9/10~9/17</span></button>
                <div class="event-detail" id="event-radio" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/(9-10~9-17) ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸/ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸ 1.png" alt="ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸ 1" class="event-image" />
                    <img src="assets/etc/event/(9-10~9-17) ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸/ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸ 2.png" alt="ì¼ì¼ ë¼ë””ì˜¤ ì‹ ì²­ ì´ë²¤íŠ¸ 2" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('vote')">ì‚¬ì „íˆ¬í‘œ ì¸ì¦<span class="event-period">9/10~9/18</span></button>
                <div class="event-detail" id="event-vote" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-10~9-18 ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸/ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸ 1.jpeg" alt="ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸ 1" class="event-image" />
                    <img src="assets/etc/event/9-10~9-18 ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸/ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸ 2.jpeg" alt="ì‚¬ì „íˆ¬í‘œ ì¸ì¦ ì´ë²¤íŠ¸ 2" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('kakao')">ì¹´ì¹´ì˜¤ë®¤ì§ ë‹¤ìš´ë¡œë“œ í˜ì´ë°±<span class="event-period">ì„ ì°© 200ëª…</span></button>
                <div class="event-detail" id="event-kakao" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/(ì„ ì°© ì†Œì§„ ì‹œê¹Œì§€) ì¹´ì¹´ì˜¤ë®¤ì§ ë‹¤ìš´ë¡œë“œ í˜ì´ë°± ì´ë²¤íŠ¸/ì¹´ì¹´ì˜¤ë®¤ì§ ë‹¤ìš´ë¡œë“œ í˜ì´ë°± ì´ë²¤íŠ¸.jpeg" alt="ì¹´ì¹´ì˜¤ë®¤ì§ ë‹¤ìš´ë¡œë“œ í˜ì´ë°± ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('melon')">ë©œë¡  ì„ ë¬¼í•˜ê¸° í˜ì´ë°±<span class="event-period">ì„ ì°© 100ëª…</span></button>
                <div class="event-detail" id="event-melon" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/(ì„ ì°© ì†Œì§„ ì‹œê¹Œì§€) ë©œë¡  ì„ ë¬¼í•˜ê¸° í˜ì´ë°± ì´ë²¤íŠ¸/ë©œë¡  ì„ ë¬¼í•˜ê¸° í˜ì´ë°± ì´ë²¤íŠ¸.png" alt="ë©œë¡  ì„ ë¬¼í•˜ê¸° í˜ì´ë°± ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('mv')">ë®¤ë¹„ ë‹¤ìš´ë¡œë“œ<span class="event-period">9/10~9/17</span></button>
                <div class="event-detail" id="event-mv" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-10~9-17 ë®¤ë¹„ ë‹¤ìš´ë¡œë“œ ì´ë²¤íŠ¸/ë®¤ë¹„ ë‹¤ìš´ë¡œë“œ ì´ë²¤íŠ¸.png" alt="ë®¤ë¹„ ë‹¤ìš´ë¡œë“œ ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('shorts')">ìˆí¼ ì œì‘<span class="event-period">9/9~9/21</span></button>
                <div class="event-detail" id="event-shorts" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-9~9-21 ìˆí¼ ì´ë²¤íŠ¸/ìˆí¼ ì´ë²¤íŠ¸ 1.png" alt="ìˆí¼ ì´ë²¤íŠ¸ 1" class="event-image" />
                    <img src="assets/etc/event/9-9~9-21 ìˆí¼ ì´ë²¤íŠ¸/ìˆí¼ ì´ë²¤íŠ¸ 2.png" alt="ìˆí¼ ì´ë²¤íŠ¸ 2" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('music')">ìŒì› ë‹¤ìš´ë¡œë“œ<span class="event-period">9/11~9/16</span></button>
                <div class="event-detail" id="event-music" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-11~9-16 ìŒì› ë‹¤ìš´ë¡œë“œ ì¸ì¦ ì´ë²¤íŠ¸/ìŒì› ë‹¤ìš´ë¡œë“œ ì¸ì¦ ì´ë²¤íŠ¸.png" alt="ìŒì› ë‹¤ìš´ë¡œë“œ ì¸ì¦ ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('iphone')">ì•„ì´í° 17 PRO<span class="event-period">9/12~9/15</span></button>
                <div class="event-detail" id="event-iphone" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-12~9-15 ì•„ì´í° 17í”„ë¡œ ìŠ¤ë°ì´ë²¤íŠ¸/ì•„ì´í° 17í”„ë¡œ ìŠ¤ë°ì´ë²¤íŠ¸.jpg" alt="ì•„ì´í° 17í”„ë¡œ ìŠ¤ë°ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('album')">ì•¨ë²” ì¶”ê°€ êµ¬ë§¤<span class="event-period">9/13~9/14</span></button>
                <div class="event-detail" id="event-album" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-13~9-14 ì´ˆë™ ë§ˆê° ì „ ì•¨ë²” ì¶”ê°€ êµ¬ë§¤ ì´ë²¤íŠ¸/ì´ˆë™ ë§ˆê° ì „ ì•¨ë²” ì¶”ê°€ êµ¬ë§¤ ì´ë²¤íŠ¸.png" alt="ì´ˆë™ ë§ˆê° ì „ ì•¨ë²” ì¶”ê°€ êµ¬ë§¤ ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('streaming')">ìŒì›ìŠ¤ë°&ë®¤ë¹„ìŠ¤ë° ì•µì½œ<span class="event-period">9/14~9/15</span></button>
                <div class="event-detail" id="event-streaming" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-14~9-15 ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸/ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸ 1.png" alt="ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸ 1" class="event-image" />
                    <img src="assets/etc/event/9-14~9-15 ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸/ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸ 2.png" alt="ì¼ì¼ ìŒì›ìŠ¤ë°&ë®¤ë¹„ ìŠ¤ë° ì•µì½œ ì´ë²¤íŠ¸ 2" class="event-image" />
                  </div>
                </div>
              </div>
              
              <div class="event-item-wrapper">
                <button class="guide-item" onclick="toggleEventDetail('cumulative')">ëˆ„ì  ìŠ¤ë°<span class="event-period">9/15~9/25</span></button>
                <div class="event-detail" id="event-cumulative" style="display: none;">
                  <div class="event-image-container">
                    <img src="assets/etc/event/9-15~9-25 ëˆ„ì  ìŠ¤ë° ì´ë²¤íŠ¸/ëˆ„ì  ìŠ¤ë° ì´ë²¤íŠ¸.png" alt="ëˆ„ì  ìŠ¤ë° ì´ë²¤íŠ¸" class="event-image" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Daily To do list í˜ì´ì§€ -->
    <section id="todo-view" class="container todo-section" style="display: none;">
      <div class="card">
        <div class="todo-hub">
          <!-- ê³µí†µ ì¼ì • -->
          <div class="common-tasks">
            <div class="common-tasks-list">
              <div class="common-task-item">â€¢ ìŒì› ìŠ¤íŠ¸ë¦¬ë° í•˜ê¸°</div>
              <div class="common-task-item">â€¢ ë®¤ì§ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° í•˜ê¸°</div>
              <div class="common-task-item">â€¢ ì§€ë‹ˆ ìŒì•… ë‚˜ëˆ„ê¸°ë¡œ ì§€ë‹ˆ ìŠ¤íŠ¸ë¦¬ë° í•˜ê¸°</div>
              <div class="common-task-item">â€¢ ë¼ë””ì˜¤ ì‹ ì²­ í•˜ê¸°</div>
              <div class="common-task-item">â€¢ ê·¸ ì™¸ ìŠ¤ë°íŒ€ì— ì˜¬ë¼ì˜¤ëŠ” ë…ë ¤ ë“± ì˜ ë³´ê³  ì°¸ì—¬í•˜ê¸°!</div>
            </div>
          </div>
          
          <div class="calendar-container">
            <div id="calendar"></div>
          </div>
          <div class="todo-details" id="todo-details" style="display: none;">
            <h3 id="selected-date-title">ì„ íƒëœ ë‚ ì§œ</h3>
            <div class="todo-list" id="todo-list">
              <!-- í•  ì¼ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>í•´ì°¬ ìŠ¤íŠ¸ë¦¬ë°</p>
      <p>e-mail : haechanstreamteam@gmail.com</p>
      <p>Copyright 2025. HAECHAN STREAM All Rights Reserved.</p>
    </footer>

    <!-- Group Buy Modal -->
    <div id="gbModal" class="modal">
      <div class="modal-content">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
          <h3 id="gbTitle" style="margin:0;">ê³µë™êµ¬ë§¤</h3>
          <button onclick="closeGbModal()" class="btn" aria-label="ë‹«ê¸°">âœ•</button>
        </div>
        <div id="gbBody" class="guide-grid"></div>
      </div>
    </div>    <script src="js/dashboard.js?v=20250915a"></script>
    <script src="js/chart.js?v=20250915a"></script>
    <script src="js/guide.js?v=20250915a"></script>
    <script>
      const hamburgerBtn = document.getElementById('hamburgerBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      const backdrop = document.getElementById('menuBackdrop');
      let savedScrollY = 0;

      function openMenu() {
        mobileMenu.classList.add('open');
        backdrop.classList.add('visible');
        hamburgerBtn.setAttribute('aria-expanded', 'true');
        mobileMenu.setAttribute('aria-hidden', 'false');
        // Robust body scroll lock (iOS-safe): fix body and restore scroll later
        savedScrollY = window.scrollY || window.pageYOffset || 0;
        document.body.style.top = `-${savedScrollY}px`;
        document.body.classList.add('no-scroll');
        document.body.classList.add('no-scroll-fixed');
      }
      function closeMenu() {
        mobileMenu.classList.remove('open');
        backdrop.classList.remove('visible');
        hamburgerBtn.setAttribute('aria-expanded', 'false');
        mobileMenu.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('no-scroll');
        document.body.classList.remove('no-scroll-fixed');
        const y = savedScrollY || 0;
        document.body.style.top = '';
        if (y) { window.scrollTo(0, y); }
        savedScrollY = 0;
      }
      function toggleMenu() {
        if (mobileMenu.classList.contains('open')) { closeMenu(); } else { openMenu(); }
      }

      hamburgerBtn.addEventListener('click', toggleMenu);
      document.getElementById('menuCloseBtn').addEventListener('click', closeMenu);
      backdrop.addEventListener('click', closeMenu);
      // Prevent accidental scroll chaining to body at top/bottom
      mobileMenu.addEventListener('touchmove', function(e){
        // nothing: overscroll-behavior handles it, but keep handler to anchor passive listeners
      }, { passive: true });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });

      // Home title click -> go home (dashboard)
      const homeTitle = document.getElementById('homeTitle');
      if (homeTitle) {
        homeTitle.addEventListener('click', () => { showView('dashboard'); });
        homeTitle.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { showView('dashboard'); } });
      }

      // Submenu toggle for 'ê°€ì´ë“œ' and 'ê¸°íƒ€'
      function toggleSubmenu(menu) {
        const submenu = document.getElementById(`${menu}Submenu`);
        const parent = document.getElementById(`${menu}Parent`);
        const isOpen = submenu.style.display === 'block';
        submenu.style.display = isOpen ? 'none' : 'block';
        if (parent) {
          const label = menu === 'guide' ? 'ê°€ì´ë“œ' : 'ê¸°íƒ€';
          parent.textContent = isOpen ? `${label} â–¾` : `${label} â–´`;
        }
      }

      // Robust banner routing (fallback if inline handler blocked)
      (function(){
        const slider = document.getElementById('bannerSlider');
        if (!slider) return;
        slider.addEventListener('click', function(e){
          const a = e.target.closest('a[data-action]');
          if (!a) return;
          const action = a.getAttribute('data-action');
          if (action === 'guide-id') {
            e.preventDefault();
            openGuideMenu('id');
          } else if (action === 'guide-vote') {
            e.preventDefault();
            openGuideMenu('vote');
          }
        });
      })();

      // Open guide view with specific type (direct routing)
      function openGuideMenu(type) {
        window.location.hash = `guide/${type}`;
        closeMenu();
      }

      // Open dashboard specific section helper
      function openDashboardSection(sectionId) {
        showView('dashboard');
        closeMenu();
        if (!sectionId) return;
        const el = document.getElementById(sectionId);
        if (el) {
          el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }

      // Open simple checklists
      function openChecklist(type) {
        // ê°€ì´ë“œ ë·°ë¡œ ì „í™˜í•˜ì—¬ ì´ë¯¸ì§€ í˜•íƒœë¡œ í‘œì‹œ (ìŒì› ê°€ì´ë“œì™€ ë™ì¼ ë ˆì´ì•„ì›ƒ ì¬ì‚¬ìš©)
        showView('guide');
        closeMenu();
        // í—ˆë¸Œ(ë²„íŠ¼ ê·¸ë¦¬ë“œ) ê°ì¶”ê³  ìƒì„¸ ì´ë¯¸ì§€ë§Œ ë…¸ì¶œ
        const hub = document.querySelector('#guide-view .guide-hub');
        if (hub) hub.style.display = 'none';
        const content = document.querySelector('#guide-view .guide-content');
        if (content) content.style.display = 'block';
        const container = document.querySelector('.guide-image-container');
        const single = document.getElementById('guideImage');
        
        
        if (type === 'pre') {
          // í•´í”„ í•  ì¼ - ë‹¤ì¤‘ ì´ë¯¸ì§€ (íˆ¬í‘œ ê°€ì´ë“œì™€ ë™ì¼í•œ ë°©ì‹)
          if (single) { single.style.display = 'none'; single.onclick = null; single.src = ''; }
          if (container) {
            Array.from(container.querySelectorAll('.vote-image')).forEach(el => el.remove());
            // ë¡œë”© placeholder ì¶”ê°€
            container.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; min-height: 300px; color: #9ca3af; font-size: 0.9rem;">ì´ë¯¸ì§€ ë¡œë”© ì¤‘...</div>';
          }
          
          const images = [
            'assets/checklist/before/í™”ë ¥ì²´í¬ ì´ê³µ.png',
            'assets/checklist/before/í•´ì‹œíƒœê·¸ ì´ê³µ.png'
          ];
          
          let loadedCount = 0;
          const totalImages = images.length;
          
          images.forEach(src => {
            const img = document.createElement('img');
            img.src = encodeURI(src);
            img.alt = 'í•´í”„ í•  ì¼ ì²´í¬ë¦¬ìŠ¤íŠ¸';
            img.className = 'guide-image vote-image';
            
            // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ placeholder ì œê±°
            img.onload = function() {
              loadedCount++;
              if (loadedCount === totalImages && container) {
                const placeholder = container.querySelector('div');
                if (placeholder && placeholder.textContent.includes('ë¡œë”© ì¤‘')) {
                  placeholder.remove();
                }
              }
            };
            
            
            if (container) container.appendChild(img);
          });
          return;
        }
        
        // ê¸°ë³¸(ì¤€ë¹„ì¤‘)
        showView('dashboard');
        alert('ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.ğŸ»');
      }

      // Open stream list (similar to checklist)
      function openStreamList() {
        window.location.hash = 'streamlist';
        closeMenu();
      }

      // ìŠ¤íŠ¸ë¦¬ë° ë¦¬ìŠ¤íŠ¸ ì½˜í…ì¸  í‘œì‹œ í•¨ìˆ˜
      function openStreamListContent() {
        // ê°€ì´ë“œ ë·°ë¡œ ì „í™˜í•˜ì—¬ ì´ë¯¸ì§€ í˜•íƒœë¡œ í‘œì‹œ (í•´í”„ í•  ì¼ê³¼ ë™ì¼ ë ˆì´ì•„ì›ƒ ì¬ì‚¬ìš©)
        // í—ˆë¸Œ(ë²„íŠ¼ ê·¸ë¦¬ë“œ) ê°ì¶”ê³  ìƒì„¸ ì´ë¯¸ì§€ë§Œ ë…¸ì¶œ
        const hub = document.querySelector('#guide-view .guide-hub');
        if (hub) hub.style.display = 'none';
        const content = document.querySelector('#guide-view .guide-content');
        if (content) content.style.display = 'block';
        const container = document.querySelector('.guide-image-container');
        const single = document.getElementById('guideImage');
        
        // ë‹¨ì¼ ì´ë¯¸ì§€ í‘œì‹œ (í•´í”„ í•  ì¼ê³¼ ë™ì¼í•œ ë°©ì‹)
        if (single) { single.style.display = 'none'; single.onclick = null; single.src = ''; }
        if (container) {
          Array.from(container.querySelectorAll('.vote-image')).forEach(el => el.remove());
          // ë¡œë”© placeholder ì¶”ê°€
          container.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; min-height: 300px; color: #9ca3af; font-size: 0.9rem;">ì´ë¯¸ì§€ ë¡œë”© ì¤‘...</div>';
        }
        
        // guide.jsì˜ encodeFilePath í•¨ìˆ˜ì™€ ë™ì¼í•œ ë°©ì‹ ì‚¬ìš©
        function encodeFilePath(path) {
          if (!path) return path;
          const lastSlash = path.lastIndexOf('/');
          if (lastSlash === -1) return encodeURIComponent(path);
          const dir = path.slice(0, lastSlash + 1);
          const file = path.slice(lastSlash + 1);
          return dir + encodeURIComponent(file);
        }
        
        const images = [
          encodeFilePath('assets/home/streamlist/streamlist.png')
        ];
        
        let loadedCount = 0;
        const totalImages = images.length;
        
        images.forEach(src => {
          const img = document.createElement('img');
          img.src = src;
          img.alt = 'ìŠ¤íŠ¸ë¦¬ë° ë¦¬ìŠ¤íŠ¸';
          img.className = 'guide-image vote-image';
          
          // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ placeholder ì œê±°
          img.onload = function() {
            loadedCount++;
            if (loadedCount === totalImages && container) {
              const placeholder = container.querySelector('div');
              if (placeholder && placeholder.textContent.includes('ë¡œë”© ì¤‘')) {
                placeholder.remove();
              }
            }
          };
          
          if (container) container.appendChild(img);
        });
      }

      // Open notice (placeholder)
      function openNotice() {
        showView('dashboard');
        closeMenu();
        alert('ê³µì§€ì‚¬í•­ì€ ê³§ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.');
      }

      // Open event page
      function openEventPage() {
        showView('event');
        closeMenu();
      }

      // Toggle event detail (accordion style)
      function toggleEventDetail(eventType) {
        const detailElement = document.getElementById(`event-${eventType}`);
        const button = document.querySelector(`[onclick="toggleEventDetail('${eventType}')"]`);
        
        if (!detailElement || !button) return;
        
        // í˜„ì¬ ìƒíƒœ í™•ì¸
        const isOpen = detailElement.style.display !== 'none';
        
        // ëª¨ë“  ë‹¤ë¥¸ ì´ë²¤íŠ¸ ìƒì„¸ ë‚´ìš© ë‹«ê¸°
        document.querySelectorAll('.event-detail').forEach(detail => {
          if (detail.id !== `event-${eventType}`) {
            detail.style.display = 'none';
            detail.style.maxHeight = '0px';
          }
        });
        
        // ëª¨ë“  ë²„íŠ¼ì˜ active ìƒíƒœ ì œê±°
        document.querySelectorAll('#event-grid .guide-item').forEach(btn => {
          btn.classList.remove('active');
        });
        
        if (isOpen) {
          // í˜„ì¬ ì—´ë ¤ìˆìœ¼ë©´ ë‹«ê¸°
          detailElement.style.display = 'none';
          detailElement.style.maxHeight = '0px';
          button.classList.remove('active');
        } else {
          // ë‹«í˜€ìˆìœ¼ë©´ ì—´ê¸°
          detailElement.style.display = 'block';
          button.classList.add('active');
          
          // ì•„ì½”ë””ì–¸ ì• ë‹ˆë©”ì´ì…˜
          detailElement.style.maxHeight = '0px';
          setTimeout(() => {
            detailElement.style.maxHeight = detailElement.scrollHeight + 'px';
          }, 10);
        }
      }

      // Daily To do list ê´€ë ¨ í•¨ìˆ˜ë“¤
      let calendar;
      let todos = JSON.parse(localStorage.getItem('haechan-todos')) || {};

      // ì´ˆê¸° ì¼ì • ë°ì´í„° ì„¤ì •
      function initializeTodoData() {
        const defaultTodos = {
          '2025-09-15': [
            { text: 'ì‚¬ì „ íˆ¬í‘œ í•˜ê¸° (ì‡¼ì±”í”¼ì–¸, ì— ì¹´ìš´íŠ¸ë‹¤ìš´, ë®¤ì§ë±…í¬)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-16': [
            { text: 'ì‚¬ì „ íˆ¬í‘œ í•˜ê¸° (ë®¤ì§ë±…í¬, ìŒì•…ì¤‘ì‹¬)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-17': [
            { text: 'ì‚¬ì „ íˆ¬í‘œ í•˜ê¸° (ë®¤ì§ë±…í¬, ìŒì•…ì¤‘ì‹¬)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-18': [
            { text: 'ì‚¬ì „ íˆ¬í‘œ í•˜ê¸° (ìŒì•…ì¤‘ì‹¬)' },
            { text: 'ì— ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹¤ì‹œê°„ íˆ¬í‘œ í•˜ê¸° (ì— ë„·í”ŒëŸ¬ìŠ¤)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-19': [
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-20': [
            { text: 'ìŒì•…ì¤‘ì‹¬ ì‹¤ì‹œê°„ ë¬¸ìíˆ¬í‘œ í•˜ê¸° (ë®¤ë¹—, ë¬¸ìíˆ¬í‘œ)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ],
          '2025-09-21': [
            { text: 'ì¸ê¸°ê°€ìš” ì‹¤ì‹œê°„ íˆ¬í‘œ í•˜ê¸° (í•˜ì´ì–´)' },
            { text: 'ìˆí¼ ì—…ë¡œë“œ í•˜ê¸° (ìœ íŠœë¸Œ, í‹±í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)' },
            { text: 'ì˜¤í›„ 7ì‹œ ìŠ¤íŠ¸ë¦¬ë° ì²«ê³¡ìœ¼ë¡œ ë¦¬ì…‹í•˜ê¸°' },
            { text: 'ê°ì¢… ì´ë²¤íŠ¸ ì°¸ì—¬í•˜ê¸°' }
          ]
        };

        // ê¸°ì¡´ ë°ì´í„°ë¥¼ ì™„ì „íˆ ì œê±°í•˜ê³  ìƒˆë¡œìš´ ë°ì´í„°ë¡œ ì´ˆê¸°í™”
        todos = defaultTodos;
        localStorage.setItem('haechan-todos', JSON.stringify(todos));
      }

      function openTodoPage() {
        showView('todo');
        closeMenu();
        initializeTodoData();
        initializeCalendar();
      }

      function initializeCalendar() {
        const calendarEl = document.getElementById('calendar');
        
        calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          locale: 'ko',
          headerToolbar: {
            left: 'title',
            center: '',
            right: 'prev,next today'
          },
          buttonText: {
            today: 'Today'
          },
          dayMaxEvents: false,
          moreLinkClick: 'popover',
          dayCellContent: function(info) {
            return info.dayNumberText.replace('ì¼', '');
          },
          dateClick: function(info) {
            showTodoDetails(info.dateStr);
          },
          datesSet: function(info) {
            // ë‹¬ë ¥ì´ ë Œë”ë§ë  ë•Œë§ˆë‹¤ ê°ˆìƒ‰ ì  ì¶”ê°€
            setTimeout(() => {
              updateCalendarEvents();
              reinitializeTodayButton();
            }, 100);
          }
        });

        calendar.render();
        updateCalendarEvents();
        
        // 'ì˜¤ëŠ˜' ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
        setTimeout(() => {
          const todayButton = document.querySelector('.fc-today-button');
          if (todayButton) {
            // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
            todayButton.removeEventListener('click', handleTodayButtonClick);
            // ìƒˆ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            todayButton.addEventListener('click', handleTodayButtonClick);
          }
        }, 100);
      }

      // 'ì˜¤ëŠ˜' ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
      function handleTodayButtonClick(event) {
        // ê¸°ë³¸ ë™ì‘ ìˆ˜í–‰ í›„ ì˜¤ëŠ˜ ë‚ ì§œ ì¼ì • í‘œì‹œ
        setTimeout(() => {
          const today = new Date().toISOString().split('T')[0];
          showTodoDetails(today);
        }, 200);
      }

      // ë‹¬ë ¥ì´ ë‹¤ì‹œ ë Œë”ë§ë  ë•Œë§ˆë‹¤ 'ì˜¤ëŠ˜' ë²„íŠ¼ ì´ë²¤íŠ¸ ì¬ì„¤ì •
      function reinitializeTodayButton() {
        setTimeout(() => {
          const todayButton = document.querySelector('.fc-today-button');
          if (todayButton) {
            todayButton.removeEventListener('click', handleTodayButtonClick);
            todayButton.addEventListener('click', handleTodayButtonClick);
          }
        }, 100);
      }

      function showTodoDetails(dateStr) {
        const todoDetails = document.getElementById('todo-details');
        const selectedDateTitle = document.getElementById('selected-date-title');
        const todoList = document.getElementById('todo-list');
        
        const date = new Date(dateStr);
        const formattedDate = date.toLocaleDateString('ko-KR', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          weekday: 'long'
        });
        
        selectedDateTitle.textContent = formattedDate;
        todoDetails.style.display = 'block';
        
        // í•´ë‹¹ ë‚ ì§œì˜ í•  ì¼ ëª©ë¡ í‘œì‹œ
        const dateTodos = todos[dateStr] || [];
        todoList.innerHTML = '';
        
        if (dateTodos.length === 0) {
          todoList.innerHTML = '<p class="no-todos">ë“±ë¡ëœ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
        } else {
          // íŠ¹ë³„ íˆ¬í‘œ ì¼ì •ê³¼ ì¼ë°˜ ì¼ì •ì„ ë¶„ë¦¬
          const specialVoteTasks = [];
          const normalTasks = [];
          
          dateTodos.forEach((todo, index) => {
            const isSpecialVote = todo.text.includes('ì‚¬ì „ íˆ¬í‘œ') || 
                                 todo.text.includes('ì‹¤ì‹œê°„ íˆ¬í‘œ') || 
                                 todo.text.includes('ë¬¸ìíˆ¬í‘œ');
            
            if (isSpecialVote) {
              specialVoteTasks.push(todo);
            } else {
              normalTasks.push(todo);
            }
          });
          
          // íŠ¹ë³„ íˆ¬í‘œ ì¼ì •ì„ ë¨¼ì € í‘œì‹œ
          specialVoteTasks.forEach((todo, index) => {
            const todoItem = document.createElement('div');
            todoItem.className = 'todo-item';
            todoItem.innerHTML = `
              <span class="todo-text special-vote">${todo.text}</span>
            `;
            todoList.appendChild(todoItem);
          });
          
          // ì¼ë°˜ ì¼ì •ì„ ë‚˜ì¤‘ì— í‘œì‹œ
          normalTasks.forEach((todo, index) => {
            const todoItem = document.createElement('div');
            todoItem.className = 'todo-item';
            todoItem.innerHTML = `
              <span class="todo-text">${todo.text}</span>
            `;
            todoList.appendChild(todoItem);
          });
        }
      }

      function updateCalendarEvents() {
        if (!calendar) return;
        
        // ì´ë²¤íŠ¸ëŠ” í‘œì‹œí•˜ì§€ ì•Šê³  ê°ˆìƒ‰ ì ë§Œ í‘œì‹œ
        calendar.removeAllEvents();
        
          // ë‹¬ë ¥ ë Œë”ë§ í›„ ê°ˆìƒ‰ ì  ì¶”ê°€
          setTimeout(() => {
            Object.keys(todos).forEach(dateStr => {
              if (todos[dateStr] && todos[dateStr].length > 0) {
                const date = new Date(dateStr);
                const dayElement = document.querySelector(`[data-date="${dateStr}"]`);
                const numberElement = dayElement ? dayElement.querySelector('.fc-daygrid-day-number') : null;
                
                if (dayElement && numberElement && !dayElement.querySelector('.todo-dot')) {
                  const dot = document.createElement('div');
                  dot.className = 'todo-dot';
                  dot.style.cssText = `
                    width: 5px;
                    height: 5px;
                    background-color: #966e4b;
                    border-radius: 50%;
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    transform: translateX(-50%);
                    margin-top: 1px;
                    z-index: 10;
                  `;
                  numberElement.style.position = 'relative';
                  numberElement.appendChild(dot);
                }
              }
            });
          }, 100);
      }

      // Prevent '#' from appearing in URL for placeholder links
      document.addEventListener('click', function(e) {
        const anchor = e.target.closest('a[href="#"]');
        if (anchor) {
          e.preventDefault();
        }
      });
    </script>
  </body>
  </html>