<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCT DREAM 스트리밍</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <link rel="stylesheet" href="styles/main.css?v=2.5">
  </head>
  <body>
    <!-- Top App Bar -->
    <div class="topbar">
      <div class="topbar__title">🐻 해찬 스트리밍</div>
      <div class="topbar__actions">
        <button class="hamburger" id="hamburgerBtn" aria-label="메뉴 열기" aria-expanded="false">
          <span class="hamburger__bars"></span>
        </button>
      </div>
    </div>

    <!-- Slide-out Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
      <div class="mobile-menu__header">
        <button class="menu-close" id="menuCloseBtn" aria-label="닫기">✕</button>
      </div>
      <a href="#" onclick="showView('dashboard'); closeMenu(); return false;">대시보드</a>
      <a href="#" onclick="showView('guide'); closeMenu(); return false;">스트리밍 가이드</a>
    </div>
    <div class="backdrop" id="menuBackdrop"></div>

    <main id="dashboard-view" class="container">
      <div class="dashboard-grid">
        <section class="chart-layout">
          <div class="card">
            <h2><span class="card-icon">🏆</span>실시간 순위 <small>(<span id="lastUpdate"></span>)</small></h2>
            <div class="rank-grid">
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/melon.png" class="service-logo">멜론 TOP100</span>
                  <span class="rank-badge" id="melon-top-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="melon-top-rank">-</span>
                  <span class="rank-change" id="melon-top-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/melon.png" class="service-logo">멜론 HOT100</span>
                  <span class="rank-badge" id="melon-hot-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="melon-hot-rank">-</span>
                  <span class="rank-change" id="melon-hot-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/bugs.ico" class="service-logo">벅스</span>
                  <span class="rank-badge" id="bugs-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="bugs-rank">-</span>
                  <span class="rank-change" id="bugs-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/genie.png" class="service-logo">지니</span>
                  <span class="rank-badge" id="genie-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="genie-rank">-</span>
                  <span class="rank-change" id="genie-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/vibe.ico" class="service-logo">바이브</span>
                  <span class="rank-badge" id="vibe-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="vibe-rank">-</span>
                  <span class="rank-change" id="vibe-change"></span>
                </div>
              </div>
              <div class="rank-card">
                <div class="rank-header">
                  <span class="rank-service-name"><img src="images/flo.ico" class="service-logo">플로</span>
                  <span class="rank-badge" id="flo-badge"></span>
                </div>
                <div class="rank-info">
                  <span class="rank-number" id="flo-rank">-</span>
                  <span class="rank-change" id="flo-change"></span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Quick Actions Layout -->
        <div class="quick-actions-row two-col">
          <div class="card">
            <h2 class="section-title"><span class="emoji">🎵</span>원클릭 스트리밍</h2>
            <div class="streaming-links">
              <a href="#" class="streaming-btn melon" onclick="goToStreaming('melon')">멜론</a>
              <a href="#" class="streaming-btn genie" onclick="goToStreaming('genie')">지니</a>
              <a href="#" class="streaming-btn bugs" onclick="goToStreaming('bugs')">벅스</a>
              <a href="#" class="streaming-btn vibe" onclick="goToStreaming('vibe')">바이브</a>
              <a href="#" class="streaming-btn flo" onclick="goToStreaming('flo')">플로</a>
            </div>
          </div>

          <div class="card">
            <h2 class="section-title"><span class="emoji">📱</span>원클릭 문자투표</h2>
            <div class="quick-actions">
              <a href="sms:00000?body=NCT DREAM BTF" class="btn">인기가요</a>
              <a href="sms:00000?body=NCT DREAM BTF" class="btn">뮤직뱅크</a>
              <a href="sms:00000?body=NCT DREAM BTF" class="btn">음악중심</a>
            </div>
          </div>
        </div>

        <div class="quick-actions-row three-col">
          <div class="card">
            <h2 class="section-title"><span class="emoji">🛒</span>공동구매</h2>
            <div class="group-buy-links">
              <button class="btn" onclick="openGroupBuy('album')">공동구매 1</button>
              <button class="btn" onclick="openGroupBuy('streaming')">공동구매 1</button>
            </div>
          </div>

          <div class="card">
            <h2 class="section-title"><span class="emoji">💰</span>멜론 충전하기</h2>
            <div class="quick-actions">
              <a href="https://www.melon.com/buy/meloncash/charge.htm" class="btn" target="_blank">멜론 캐시 충전</a>
              <a href="https://www.melon.com/muid/family/ticket/index.htm" class="btn" target="_blank">이용권 구매</a>
            </div>
          </div>

          <div class="card">
            <h2 class="section-title"><span class="emoji">📻</span>원클릭 라디오 신청</h2>
            <div class="radio-links">
              <a href="sms:#8910&body=NCT DREAM BTF 신청합니다." class="btn">KBS</a>
              <a href="sms:#8000&body=NCT DREAM BTF 신청합니다." class="btn">MBC</a>
              <a href="sms:#1077&body=NCT DREAM BTF 신청합니다." class="btn">SBS</a>
            </div>
          </div>
        </div>

        <div class="quick-actions-row">
          <div class="card youtube-section" style="grid-column: 1 / -1;">
            <h2 class="section-title"><span class="emoji">📈</span>유튜브 추이</h2>
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/3rsBWr3JOUI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="youtube-stats-display">
              <div class="stat-item">
                <span class="stat-label">조회수</span>
                <span class="stat-value" id="viewCount">-</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">좋아요</span>
                <span class="stat-value" id="likeCount">-</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <section id="guide-view" class="container" style="display: none;">
      <div class="card">
        <h2><span class="card-icon">📚</span>스트리밍 가이드</h2>
        <p>각 음원 사이트별 스트리밍 방법을 확인하세요.</p>

        <div class="main-tabs">
          <button class="main-tab active" onclick="switchMainTab('music')">음원 가이드</button>
          <button class="main-tab" onclick="switchMainTab('etc')">기타 가이드</button>
        </div>

        <div id="musicServiceTabs" class="service-tabs">
          <button class="service-tab active" onclick="switchServiceTab('melon')">멜론</button>
          <button class="service-tab" onclick="switchServiceTab('genie')">지니</button>
          <button class="service-tab" onclick="switchServiceTab('bugs')">벅스</button>
          <button class="service-tab" onclick="switchServiceTab('vibe')">바이브</button>
          <button class="service-tab" onclick="switchServiceTab('flo')">플로</button>
          <button class="service-tab" onclick="switchServiceTab('kakao')">카카오 뮤직</button>
        </div>

        <div id="etcServiceTabs" class="service-tabs" style="display: none;">
          <button class="service-tab active" onclick="switchServiceTab('youtube')">유튜브</button>
        </div>

        <div id="guideTabs" class="guide-tabs" style="display: none;">
          <button class="guide-tab active" data-type="streaming" onclick="switchGuideTab('streaming')">스트리밍</button>
          <button class="guide-tab" data-type="music" onclick="switchGuideTab('music')">음원 다운로드</button>
          <button class="guide-tab" data-type="mv" onclick="switchGuideTab('mv')">뮤비 다운로드</button>
          <button class="guide-tab" data-type="id" onclick="switchGuideTab('id')">아이디 찾기</button>
        </div>

        <div id="deviceTabs" class="device-tabs" style="display: none;">
          <button class="device-tab active" data-device="mobile" onclick="switchDeviceTab('mobile')">모바일</button>
          <button class="device-tab" data-device="pc" onclick="switchDeviceTab('pc')">PC</button>
        </div>

        <div class="guide-content" style="display: none;">
          <div class="guide-image-container">
            <img id="guideImage" class="guide-image" alt="가이드 이미지" />
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>&copy; 2025 NCT DREAM Chart Tracker. All rights reserved.</p>
    </footer>

    <script src="js/dashboard.js?v=2.5"></script>
    <script src="js/chart.js?v=2.5"></script>
    <script src="js/guide.js?v=2.5"></script>
    <script>
      const hamburgerBtn = document.getElementById('hamburgerBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      const backdrop = document.getElementById('menuBackdrop');

      function openMenu() {
        mobileMenu.classList.add('open');
        backdrop.classList.add('visible');
        hamburgerBtn.setAttribute('aria-expanded', 'true');
        mobileMenu.setAttribute('aria-hidden', 'false');
      }
      function closeMenu() {
        mobileMenu.classList.remove('open');
        backdrop.classList.remove('visible');
        hamburgerBtn.setAttribute('aria-expanded', 'false');
        mobileMenu.setAttribute('aria-hidden', 'true');
      }
      function toggleMenu() {
        if (mobileMenu.classList.contains('open')) { closeMenu(); } else { openMenu(); }
      }

      hamburgerBtn.addEventListener('click', toggleMenu);
      document.getElementById('menuCloseBtn').addEventListener('click', closeMenu);
      backdrop.addEventListener('click', closeMenu);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });
    </script>
  </body>
  </html>